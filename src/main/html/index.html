<html>
<head>
<title>Test Scenario Designer</title>
<link rel="stylesheet" type="text/css" href="../css/joint.css" />
<script src="../javascript/jquery-2.1.4.min.js"></script>
<script src="../javascript/lodash.min.js"></script>
<script src="../javascript/backbone-min.js"></script>
<script src="../javascript/joint.js"></script>
<script src="../javascript/json2.js"></script>
<script src="../javascript/jolokia.js"></script>
<script src="../javascript/jolokia-simple.js"></script>
<script src="../javascript/ultest.js"></script>

<style>
#menu {
    background: #CCCCCC;
    height: 100%;
    width: 300px;
    overflow-y: scroll;
    float: left;
}
#midcol {
    background: #EEEEEE;
    height: 100%;
    width: 1000px;
    float: left;
}
</style>
</head>
<body>

    <div id="designer">
        <div id="menu">
            <table width="100%">
                <tr>
                    <td colspan="2" align="center">Menu</td>
                </tr>
                <tr>
                    <td align="center"><img src="../resources/plug.png"/></td>
                    <td align="center"><img src="../resources/plug_delete.png"/></td>
                </tr>
             </table>
        </div>
        <div id="midcol" height="500px">
            <table width="100%">
                <tr>
                <td style="height: 80px"></td>
                </tr>
                <tr>
                    <td><div id="myholder"></div></td>
                </tr>
                <tr>
                    <td><textarea id="output-box" style="width: 100%; height: 400px"></textarea></td>
                </tr>
            </table>
         </div>
    </div>
    <button type="button" onclick="executeScript('test.script', document.getElementById('output-box').value);">Play</button>
  <script type="text/javascript">

    var graph = new joint.dia.Graph;

    joint.shapes.basic.DecoratedRect = joint.shapes.basic.Generic.extend({

        markup: '<g class="rotatable"><g class="scalable"><rect/></g><image/><text/></g>',

        defaults: joint.util.deepSupplement({

            type: 'basic.DecoratedRect',
            size: { width: 100, height: 100 },
            attrs: {
                'rect': { stroke: 'black', width: 100, height: 100 },
                'text': { 'font-size': 14, text: '', 'ref-x': .5, 'ref-y': .5, ref: 'rect', 'y-alignment': 'bottom', 'x-alignment': 'middle', fill: 'black' },
                'image': { 'ref-x': 2, 'ref-y': 2, ref: 'rect', width: 64, height: 64 }
            }

        }, joint.shapes.basic.Generic.prototype.defaults)
    });

    var paper = new joint.dia.Paper({
        el: $('#myholder'),
        width: 600,
        height: 400,
        model: graph,
        gridSize: 1
    });

    var connectButton = new joint.shapes.basic.DecoratedRect({
        position: { x: 100, y: 30 },
        size: { width: 80, height: 80 },
        attrs: { image: { 'xlink:href': '../resources/plug.png'} }
    });

    var disconnectButton = new joint.shapes.basic.DecoratedRect({
        position: { x: 500, y: 30 },
        size: { width: 80, height: 80 },
        attrs: { image: { 'xlink:href': '../resources/plug_delete.png'} }
    });

    var link = new joint.dia.Link({
        source: { id: connectButton.id },
        target: { id: disconnectButton.id },
        attrs: {
            '.marker-target': { stroke: '#E74C3C', fill: '#E74C3C', d: 'M 10 0 L 0 5 L 10 10 z' }
        }
    });

    graph.addCells([connectButton, disconnectButton, link]);
    document.getElementById("output-box").text = graph.toJSON();
  </script>
</body>
</html>